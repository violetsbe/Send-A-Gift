<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.violet.mapper.UserMapper">
	
	
	<select id="getTime" resultType="string">
	SELECT now()
	</select>
	
	<insert id="insertUser">
	INSERT INTO user (user_id, id, pwd, user_name, birth, gender, email, user_level, status_message) VALUES
	((SELECT CONCAT('U', LPAD(IFNULL(SUBSTR(MAX(user_id), 1), 0)+1, 6, 0)) AS new_id FROM user u), #{id}, #{pwd}, #{user_name}, #{birth}, #{gender}, #{email}, #{user_level}, #{status_message})
	</insert>
	
	<select id="readUser" resultType="com.violet.domain.User">
	SELECT * FROM user WHERE user_id = #{user_id}
	</select>
	
	<select id="selectWithPW" resultType="com.violet.domain.User">
	SELECT * FROM user WHERE id = #{id} and pwd = #{pwd}
	</select>

</mapper>